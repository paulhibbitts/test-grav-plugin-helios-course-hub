{% extends 'partials/base-simple.html.twig' %}

{% block content %}
    {# Page header #}
    <header class="mb-8 pb-8 border-b border-gray-200 dark:border-gray-800">
        <h1 class="text-3xl sm:text-4xl font-bold tracking-tight text-gray-900 dark:text-white">
            {{ page.title }}
        </h1>
        {% if page.header.description %}
        <p class="mt-4 text-lg text-gray-600 dark:text-gray-400">
            {{ page.header.description }}
        </p>
        {% endif %}
    </header>

    {# Page content if any #}
    {% if page.content|trim %}
        <article class="prose prose-lg dark:prose-invert max-w-none mb-12">
            {{ page.content|raw }}
        </article>
    {% endif %}

    {# Auto-generated course cards from version folders #}
    {% if helios_version_info.versions is defined and helios_version_info.versions|length > 0 %}
    {% set colClass = {
        1: 'grid-cols-1',
        2: 'sm:grid-cols-2',
        3: 'sm:grid-cols-2 lg:grid-cols-3',
        4: 'sm:grid-cols-2 lg:grid-cols-4'
    } %}
    <div class="grid gap-4 {{ colClass[page.header.cards_per_row|default(1)] ?? 'grid-cols-1' }}">
        {% for version in helios_version_info.versions %}
            {# Find the version's root page for icon/description #}
            {% set version_page = pages.find('/' ~ version.id) %}
            {% include 'partials/doc-card.html.twig' with {
                title: version.label,
                link: version.url,
                icon: version_page.header.icon|default(page.header.card_icon|default('tabler/layout-list.svg')),
                description: version_page.header.description|default(null)
            } only %}
        {% endfor %}
    </div>
    {% endif %}
{% endblock %}
